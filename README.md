This is a simple HF frequency detector, capable of measuring signals from 1-50MHz, at signal powers of 5-150W or more, at all types of modulation(*). Works via single rail (5V) and coverts any sinusoidal signal, as small as 100mVpp, to as large as 200Vpp in to a clean 5V, 50% duty cycle, square wave at a frequency 16384 (or 1024) times smaller than the inputs, perfect for measurment from any MCU such as ATMEGA (arduino), PIC, STM...

The design uses an LT1719 ultra-fast comparator in single rail supply mode. This means that the inverting and non inverting inputs need to be level shifted to a voltage preferable in the middle of the rails, so a 50/50 voltage divider is used (R2,R3). The inverting input uses two resistors and a trimmer (R5, 56, R7) to achieve a voltage as close to the non inverting offset. This cannot be repleaced by two resistors, as unless you use resistors with less than 0.1% deviation, your low level signal input will not be measured effectivly, as zero crossing will not be achieved. The output of the comparator feeds into the X1 input of the 74AHC1G4214 14 stage divider, which outputs a frequency 16384 times smaller than it's inputs. If lower input frequency measurment is needed, a direct substituion by 74AHC1G4210 may be used, as it divides by only 1024. One may also substitute it with this IC if higher measurment accuracy is needed and the MCU measurment side is capable of such higher frequencies.

High power input is achieved with a combination of a coupling resistor (R1) and clamping diodes (D1, D2). The output of this clamping circuit is transfered to the offseted non-inverting input via C1. If ultra low input measurment is needed, R1 may be proportionatly subsized to values such as 1k, 10k, 20k... If such a small input coupling resistor is used, firstly the signal generator will feel more load, secondly if high input power is transmitted into the device, 1N4148 diodes may overheat or blow.

Device accuracy is driven mostly by input modulation, MCU measurment mode and the 16k dividing ratio. AM and FM modulation at no voice input give best measurment results, with deviation as low as +-5kHz throughout the enitre measurment range (0.5% @ 1MHz, 0.01% @ 50MHz). SSB modes can also be measured, but a steady tone voice input is needed for accurate measurment. If no voice input is given, random zero crossings will be detected and the measurment is void. If the 74AHC1G4210 is used, higher absolute accuracies may be achieved, but at the cost of much higher sampling speed of the MCU. For my measurments, an ATMEGA2560 on a custom PCB is used, programed via arduino IDE, and using the 16 bit Timer 5, the accuracy of measurment is around +-10kHz. If even lower MCU cycle consumption is required ISR interupt measurment mode on rising edge can be used. If the device is measuring very low frequencies from 1kHz - 500kHz, i would recommend measuring the actual time at which the square wave is 1 and 0, and deriving that way, as a pulse over time approach will give very slow and inacurate measurments. Pulsein() is not recommended as it is code-blocking and generaly unstable.

The device is meant as a frequency detector not so much for absolute frequency measurment although in some aplications it may work. It will be used as part of another project for device band selection, where realistcally +-0.5MHz is accurate enough.
<img width="987" height="829" alt="merilnikfrekvenc" src="https://github.com/user-attachments/assets/d90972bc-df91-4824-97a4-b43c4201894f" />
![20260215_215544](https://github.com/user-attachments/assets/bee05ce0-f5ce-4e62-b66b-3342f8b029f9)
![20260215_215532](https://github.com/user-attachments/assets/738c96a8-abab-4caa-bd5b-67be481a5bc2)
![20260215_215604](https://github.com/user-attachments/assets/36d1abfa-2419-44f2-bf51-f5a2a0bc63e1)
![20260215_213930](https://github.com/user-attachments/assets/4b7970c5-d07e-4711-bf57-3d56a93bd624)


